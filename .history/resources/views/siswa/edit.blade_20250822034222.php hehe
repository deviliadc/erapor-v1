<x-app-layout>
    <x-breadcrumbs :breadcrumbs="[]" :title="'Edit Data Siswa'" />
    <div class="space-y-6">
        <div class="rounded-2xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03]">
            <div class="px-5 py-4 sm:px-6 sm:py-5">
                <h3 class="text-base font-medium text-gray-800 dark:text-white/90">Edit Data Siswa</h3>
            </div>
            <form action="#" method="POST" enctype="multipart/form-data"
                class="space-y-6 border-t border-gray-100 p-5 sm:p-6 dark:border-gray-800">
                @csrf
                @method('PUT')

                {{-- Nama --}}
                <x-form.input label="Nama" name="nama" value="Budi Santoso" required/>
                {{-- NIS --}}
                <x-form.input label="NIS" name="nis" value="123456" required/>
                {{-- NISN --}}
                <x-form.input label="NISN" name="nisn" value="654321" required/>
                {{-- Jenis Kelamin --}}
                <x-form.select
                    label="Jenis Kelamin"
                    name="jenis_kelamin"
                    :options="['Laki-laki' => 'Laki-laki', 'Perempuan' => 'Perempuan']"
                    placeholder="Pilih jenis kelamin"
                    selected="Laki-laki"
                    required
                />
                {{-- Tempat Lahir --}}
                <x-form.input label="Tempat Lahir" name="tempat_lahir" value="Jakarta" required/>
                {{-- Tanggal Lahir --}}
                <x-form.date-picker label="Tanggal Lahir" name="tanggal_lahir" value="2005-08-12"
                    placeholder="Pilih tanggal" class="datepicker" required/>
                {{-- Pendidikan Sebelumnya --}}
                <x-form.input label="Pendidikan Sebelumnya" name="pendidikan_sebelumnya" value="SMP Negeri 1" />
                {{-- Alamat --}}
                <x-form.textarea label="Alamat" name="alamat" placeholder="Masukkan alamat" rows="4">
                    Jl. Merdeka No. 45, Jakarta
                </x-form.textarea>
                {{-- No HP --}}
                <x-form.input label="No HP" name="no_hp" placeholder="628xxxxxxxxxx" value="6281234567890" />
                {{-- Email --}}
                <x-form.input label="Email" name="email" type="email" value="budi@example.com" />
                {{-- Status --}}
                <x-form.select
                    label="Status"
                    name="status"
                    :options="['Aktif' => 'Aktif', 'Lulus' => 'Lulus', 'Keluar' => 'Keluar', 'Mutasi' => 'Mutasi']"
                    placeholder="Pilih status"
                    selected="Aktif"
                    required
                />

                <div class="px-5 py-4 sm:px-6 sm:py-5 border-b border-gray-100 dark:border-gray-800">
                    <h3 class="text-base font-medium text-gray-800 dark:text-white/90">Data Wali Murid</h3>
                </div>

                {{-- Dropdown tetap ada --}}
                <x-form.select
                    label="Pilih Wali"
                    name="wali_murid_id"
                    :options="['baru' => '+ Tambah Wali Baru']"
                    placeholder="-- Pilih Wali --"
                    selected="baru"
                    onchange="toggleWaliForm(this.value)"
                />

                {{-- Form wali langsung muncul --}}
                <div id="wali_baru_inputs" class="space-y-6 mt-4">
                    {{-- Nama Ayah --}}
                    <x-form.input label="Nama Ayah" name="nama_ayah" value="Slamet Santoso" required/>
                    {{-- Nama Ibu --}}
                    <x-form.input label="Nama Ibu" name="nama_ibu" value="Siti Aminah" required/>
                    {{-- Nama Wali --}}
                    <x-form.input label="Nama Wali" name="nama_wali" value="Paman Joko" />
                    {{-- No HP --}}
                    <x-form.input label="No HP" name="no_hp_wali" placeholder="628xxxxxxxxxx" value="6289876543210" />
                    {{-- Pekerjaan Ayah --}}
                    <x-form.input label="Pekerjaan Ayah" name="pekerjaan_ayah" value="Karyawan Swasta" required/>
                    {{-- Pekerjaan Ibu --}}
                    <x-form.input label="Pekerjaan Ibu" name="pekerjaan_ibu" value="Ibu Rumah Tangga" required/>
                    {{-- Pekerjaan Wali --}}
                    <x-form.input label="Pekerjaan Wali" name="pekerjaan_wali" value="Pedagang" />
                    {{-- Alamat --}}
                    <x-form.textarea label="Alamat" name="alamat_wali" placeholder="Masukkan alamat" rows="4">
                        Jl. Melati No. 12, Jakarta
                    </x-form.textarea>
                </div>

                {{-- Submit --}}
                <div class="flex justify-end">
                    <button type="submit"
                        class="inline-flex items-center gap-2 rounded-lg bg-brand-500 w-36 justify-center
                        px-4 py-2.5 text-sm font-medium text-white shadow-theme-xs hover:bg-brand-600">
                        Update
                    </button>
                </div>
            </form>
        </div>
    </div>
</x-app-layout>

<script>
    function toggleWaliForm(value) {
        const waliBaruInputs = document.getElementById('wali_baru_inputs');
        const isBaru = value === 'baru';
        waliBaruInputs.style.display = isBaru ? 'block' : 'none';
    }
</script>

<style>
.flatpickr-day.disabled,
.flatpickr-day.flatpickr-disabled,
.flatpickr-day:not(.prevMonthDay):not(.nextMonthDay):not(.today).flatpickr-disabled {
    background: #f3f4f6 !important; /* abu-abu (gray-100) */
    color: #b0b0b0 !important;
    cursor: not-allowed !important;
    opacity: 1 !important;
}
</style>
